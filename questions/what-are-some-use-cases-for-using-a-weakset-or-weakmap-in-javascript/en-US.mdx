---
title: What are some use cases for using a `WeakSet` or `WeakMap` in JavaScript?
---

## TL;DR

`WeakSet` and `WeakMap` in JavaScript are used for memory-efficient storage of objects where you don't want to prevent garbage collection. `WeakSet` is useful for tracking objects without preventing their garbage collection, while `WeakMap` is ideal for associating data with objects without creating strong references. Both are particularly useful in scenarios like caching, managing private data, and tracking object states.

---

## Use cases for using a `WeakSet` or `WeakMap` in JavaScript

### WeakSet

#### Tracking objects without preventing garbage collection

A `WeakSet` allows you to store objects without preventing them from being garbage collected. This is useful when you need to keep track of objects but don't want to interfere with their lifecycle.

```js
const weakSet = new WeakSet();
let obj = { name: 'example' };

weakSet.add(obj);

// obj can still be garbage collected if there are no other references to it
obj = null;
```

#### Avoiding memory leaks

Since `WeakSet` holds weak references to objects, it helps in avoiding memory leaks in applications where objects are dynamically created and destroyed.

```js
const weakSet = new WeakSet();

function process(obj) {
  if (!weakSet.has(obj)) {
    weakSet.add(obj);
    // Perform some operations
  }
}
```

### WeakMap

#### Associating data with objects

A `WeakMap` allows you to associate data with objects without preventing them from being garbage collected. This is useful for storing metadata or private data related to an object.

```js
const weakMap = new WeakMap();
let obj = { name: 'example' };

weakMap.set(obj, 'some metadata');

// obj can still be garbage collected if there are no other references to it
obj = null;
```

#### Implementing private properties

`WeakMap` can be used to implement private properties in JavaScript classes, ensuring that the properties are not accessible from outside the class.

```js
const privateData = new WeakMap();

class MyClass {
  constructor(name) {
    privateData.set(this, { name });
  }

  getName() {
    return privateData.get(this).name;
  }
}

const instance = new MyClass('example');
console.log(instance.getName()); // 'example'
```

#### Caching results

`WeakMap` can be used to cache results of expensive computations associated with objects, ensuring that the cache does not prevent the objects from being garbage collected.

```js
const cache = new WeakMap();

function compute(obj) {
  if (!cache.has(obj)) {
    const result = expensiveComputation(obj);
    cache.set(obj, result);
  }
  return cache.get(obj);
}
```

## Further reading

- [MDN Web Docs: WeakSet](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet)
- [MDN Web Docs: WeakMap](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)
- [JavaScript.info: WeakMap and WeakSet](https://javascript.info/weakmap-weakset)
